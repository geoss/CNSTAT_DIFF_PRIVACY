# CNSTAT_DIFF_PRIVACY
Analyses by Spielman and Van Riper for the December 2019 [Workshop on 2020 Census Data Products: Data Needs and Privacy Considerations](https://sites.nationalacademies.org/DBASSE/CNSTAT/DBASSE_196518).   

Our slides are [here](https://www.dropbox.com/s/b85pkmibuz9gxp1/CNSTAT%20Presentation%202019_DVR_SS_121019.pptx?dl=0)(on Dropbox)

In general this repository is a mess, it was rapidly constructed for the workshop, it contains the following code and data:

## Data
1.  **Input** A National File containing all census tracts, their original 2010 Decennial Census estimates, and their corresponding estimates from 2010 Differential Privacy Demonstration Data.
2.  **Input** A census tract to Core Based Statistical Area (CBSA) crosswalk.
3.  **Input** Files defining CBSA type.
4.  **Output** A file comparing the differences between all adjacent pairs of census tracts in Washington, DC.  
5.  **Output** A geojson for Washington,DC that shows differences in sifferential privacy due to DP.  THe files also containts maximum difference observed between a census tract and its neightors.

## Code
1.  [main.R](https://github.com/geoss/CNSTAT_DIFF_PRIVACY/blob/master/code/main.R) File to run most analyses and data prep scripts.  Spits out some spatial data.  
1.  [tract_data_prep.R](https://github.com/geoss/CNSTAT_DIFF_PRIVACY/blob/master/code/tract_data_prep.R) Mushes together the geographic boundairies,tract data, and CBSA definitions.
2.  [calc_local_diffs.R](https://github.com/geoss/CNSTAT_DIFF_PRIVACY/blob/master/code/calc_local_diffs.R) Defines a sereis of function for looking at tract-to-tract differences do to DP.  Several utility functions are also defined to allow computinng the functional in parallel at scale.
3.  [moran_and_plot.R](https://github.com/geoss/CNSTAT_DIFF_PRIVACY/blob/master/code/moran_and_plot.R) Calculate Morans I and run tests of the spatial randomness of the errors.  Spits out some plots.
4.  [descriptive_plots.R](https://github.com/geoss/CNSTAT_DIFF_PRIVACY/blob/master/code/descriptive_plots.R) Some descriptive plots of the differences between the original and differentially Private 2010 Census Tract data.
5.  [segregation_under_dp.R](https://github.com/geoss/CNSTAT_DIFF_PRIVACY/blob/master/code/segregation_under_dp.rmd) A markdown file with code to calculate segregation statistics.

The figures folder contains lots of output, titles should be slef explanatory.  All are generated by included code.

